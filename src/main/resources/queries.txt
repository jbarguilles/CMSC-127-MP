CREATE TABLE BRN
(
    BRN_ID        NUMBER NOT NULL,
    PGUEST_ID     NUMBER NOT NULL,
    BOOKING_DATE  VARCHAR2(20) NOT NULL,
    CHECKIN_DATE  VARCHAR2(20) NOT NULL,
    CHECKOUT_DATE VARCHAR2(20),
    CONSTRAINT BRN_ID_PK PRIMARY KEY (BRN_ID)
);

CREATE SEQUENCE BRN_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE BRN SET BRN_ID = BRN_SEQ.nextval

CREATE TABLE PRIMARY_GUEST(
   PGUEST_ID NUMBER NOT NULL,
   FIRST_NAME VARCHAR2(20) NOT NULL,
   LAST_NAME VARCHAR2(20) NOT NULL,
   BIRTHDAY DATE NOT NULL,
   ADDRESS VARCHAR2(200) NOT NULL,
   CONTACT_NUMBER NUMBER NOT NULL,
   EMAIL_ADDRESS VARCHAR2(50) NOT NULL,
   CONSTRAINT PGUEST_ID_FK PRIMARY KEY (PGUEST_ID)
);

CREATE SEQUENCE PGUEST_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE PRIMARY_GUEST SET PGUEST_ID = PGUEST_SEQ.nextval

CREATE TABLE SECONDARY_GUEST(
   SGUEST_ID NUMBER NOT NULL,
   FIRST_NAME VARCHAR2(20) NOT NULL,
   LAST_NAME VARCHAR2(20) NOT NULL,
   BIRTHDAY DATE NOT NULL,
   ADDRESS VARCHAR2(200),
   CONTACT_NUMBER NUMBER,
   EMAIL_ADDRESS VARCHAR2(50),
   CONSTRAINT SGUEST_ID_FK PRIMARY KEY (SGUEST_ID)
);

CREATE SEQUENCE SGUEST_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE SECONDARY_GUEST SET SGUEST_ID = SGUEST_SEQ.nextval

CREATE TABLE BRN_SGUEST(
   BRN_SGUEST_ID NUMBER NOT NULL,
   CONSTRAINT BRN_SGUEST_ID_PK PRIMARY KEY (BRN_SGUEST_ID)
);

CREATE SEQUENCE BRN_SGUEST_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE BRN_SGUEST SET BRN_SGUEST_ID = BRN_SGUEST_SEQ.nextval

ALTER TABLE BRN ADD FOREIGN KEY (PGUEST_ID) REFERENCES PRIMARY_GUEST(PGUEST_ID);

ALTER TABLE BRN_SGUEST ADD BRN_ID NUMBER;
ALTER TABLE BRN_SGUEST ADD SGUEST_ID NUMBER;
ALTER TABLE BRN_SGUEST ADD FOREIGN KEY (BRN_ID) REFERENCES BRN(BRN_ID);
ALTER TABLE BRN_SGUEST ADD FOREIGN KEY (SGUEST_ID) REFERENCES SECONDARY_GUEST(SGUEST_ID);

CREATE TABLE ROOM(
   ROOM_ID NUMBER NOT NULL,
   ROOM_NUMBER NUMBER NOT NULL,
   ROOM_TYPE_ID NUMBER NOT NULL,
   IS_OCCUPIED VARCHAR2(3) DEFAULT 'NO',
   CONSTRAINT ROOM_ID_PK PRIMARY KEY (ROOM_ID)
);


CREATE SEQUENCE ROOM_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE ROOM SET ROOM_ID = ROOM_SEQ.nextval

CREATE TABLE ROOM_TYPE(
   ROOM_TYPE_ID NUMBER NOT NULL,
   ROOM_TYPE VARCHAR2(50) NOT NULL,
   DESCRIPTION VARCHAR2(1000),
   PRICE NUMBER(9,2),
   MAX_GUESTS NUMBER,
   AREA NUMBER(9,2),
   CONSTRAINT ROOM_TYPE_ID_PK PRIMARY KEY (ROOM_TYPE_ID)
);

CREATE SEQUENCE ROOM_TYPE_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE ROOM_TYPE SET ROOM_TYPE_ID = ROOM_TYPE_SEQ.nextval

ALTER TABLE ROOM ADD FOREIGN KEY (ROOM_TYPE_ID) REFERENCES ROOM_TYPE(ROOM_TYPE_ID);

CREATE TABLE BOOKED_ROOM(
   BOOKED_ROOM_ID NUMBER NOT NULL,
   BRN_ID NUMBER NOT NULL,
   ROOM_ID NUMBER NOT NULL,
   CONSTRAINT BOOKED_ROOM_ID_PK PRIMARY KEY (BOOKED_ROOM_ID),
   CONSTRAINT BRN_ID_FK FOREIGN KEY (BRN_ID) REFERENCES BRN(BRN_ID),
   CONSTRAINT ROOM_ID_FK FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ROOM_ID)
);

CREATE SEQUENCE BOOKED_ROOM_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE BOOKED_ROOM SET BOOKED_ROOM_ID = BOOKED_ROOM_SEQ.nextval

INSERT INTO ROOM_TYPE (ROOM_TYPE_ID, ROOM_TYPE, DESCRIPTION, PRICE, MAX_GUESTS, AREA)
    VALUES (ROOM_TYPE_SEQ.nextval, 'Deluxe', 'Sample description 1', 100.00, 3, 10.00);
INSERT INTO ROOM_TYPE (ROOM_TYPE_ID, ROOM_TYPE, DESCRIPTION, PRICE, MAX_GUESTS, AREA)
    VALUES (ROOM_TYPE_SEQ.nextval, 'Grand', 'Sample description 2', 200.00, 4, 12.50);
INSERT INTO ROOM_TYPE (ROOM_TYPE_ID, ROOM_TYPE, DESCRIPTION, PRICE, MAX_GUESTS, AREA)
    VALUES (ROOM_TYPE_SEQ.nextval, 'Suite', 'Sample description 3', 300.00, 5, 15.00);
INSERT INTO ROOM_TYPE (ROOM_TYPE_ID, ROOM_TYPE, DESCRIPTION, PRICE, MAX_GUESTS, AREA)
    VALUES (ROOM_TYPE_SEQ.nextval, 'Executive', 'Sample description 3', 400.00, 6, 20.00);

INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 101, 1);
INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 102, 2);
INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 103, 3);
INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 104, 4);

ALTER SEQUENCE BRN_SEQ RESTART START WITH 1;
ALTER SEQUENCE BRN_SGUEST_SEQ RESTART START WITH 1;
ALTER SEQUENCE PGUEST_SEQ RESTART START WITH 1;
ALTER SEQUENCE SGUEST_SEQ RESTART START WITH 1;

-- Employee codes

CREATE TABLE EMPLOYEE_ROLES(
   ROLE_ID NUMBER NOT NULL,
   ROLE_NAME VARCHAR2(40) NOT NULL,
   CONSTRAINT EMPLOYEE_ROLE_PK PRIMARY KEY (ROLE_ID)
);

CREATE SEQUENCE EMP_ROLES_SEQ
  START WITH 1
  INCREMENT BY 1
  CACHE 20;

UPDATE EMPLOYEE_ROLES SET ROLE_ID = EMP_ROLES_SEQ.nextval;

INSERT INTO EMPLOYEE_ROLES (ROLE_ID, ROLE_NAME) VALUES (EMP_ROLES_SEQ.nextval, 'Front Desk');
INSERT INTO EMPLOYEE_ROLES (ROLE_ID, ROLE_NAME) VALUES (EMP_ROLES_SEQ.nextval, 'Housekeeping');
INSERT INTO EMPLOYEE_ROLES (ROLE_ID, ROLE_NAME) VALUES (EMP_ROLES_SEQ.nextval, 'Kitchen');
INSERT INTO EMPLOYEE_ROLES (ROLE_ID, ROLE_NAME) VALUES (EMP_ROLES_SEQ.nextval, 'Concierge');
INSERT INTO EMPLOYEE_ROLES (ROLE_ID, ROLE_NAME) VALUES (EMP_ROLES_SEQ.nextval, 'Supervisor');

SELECT * FROM EMPLOYEE_ROLES;

CREATE TABLE EMPLOYEE(
   EMPLOYEE_ID NUMBER NOT NULL,
   ROLE_ID NUMBER NOT NULL,
   SUPERVISOR_ID NUMBER,
   FIRST_NAME VARCHAR2(20) NOT NULL,
   LAST_NAME VARCHAR2(20) NOT NULL,
   SALARY NUMBER,
   ACCOUNT_PASSWORD VARCHAR2(20) NOT NULL,
   CONSTRAINT EMPLOYEE_PK PRIMARY KEY (EMPLOYEE_ID),
   CONSTRAINT EMPLOYEE_ROLE_ID_FK FOREIGN KEY (ROLE_ID) REFERENCES EMPLOYEE_ROLES(ROLE_ID) ON DELETE SET NULL,
   CONSTRAINT EMPLOYEE_SUPERVISOR_ID_FK FOREIGN KEY (SUPERVISOR_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID) ON DELETE SET NULL
);

CREATE SEQUENCE EMP_SEQ
  START WITH 1
  INCREMENT BY 1;

UPDATE EMPLOYEE SET EMPLOYEE_ID = EMP_SEQ.nextval;
ALTER SEQUENCE EMP_SEQ RESTART START WITH 1;

INSERT INTO EMPLOYEE (EMPLOYEE_ID, ROLE_ID, SUPERVISOR_ID, FIRST_NAME, LAST_NAME, SALARY, ACCOUNT_PASSWORD)
VALUES (EMP_SEQ.nextval, 5, NULL, 'Ayato', 'Kamisato', 50023.09,'Cypressus Custos');
INSERT INTO EMPLOYEE (EMPLOYEE_ID, ROLE_ID, SUPERVISOR_ID, FIRST_NAME, LAST_NAME, SALARY, ACCOUNT_PASSWORD)
VALUES (EMP_SEQ.nextval, 1, 1, 'Ayaka', 'Kamisato', 150000,'wetsocks');
INSERT INTO EMPLOYEE (EMPLOYEE_ID, ROLE_ID, SUPERVISOR_ID, FIRST_NAME, LAST_NAME, SALARY, ACCOUNT_PASSWORD)
VALUES (EMP_SEQ.nextval, 2, 1, 'Raiden', 'Shogun', 200000,'yaemiko');
INSERT INTO EMPLOYEE (EMPLOYEE_ID, ROLE_ID, SUPERVISOR_ID, FIRST_NAME, LAST_NAME, SALARY, ACCOUNT_PASSWORD)
VALUES (EMP_SEQ.nextval, 3, 1, 'Kokomi', 'Sangonomiya', 50023.09,'fishbabygirl');
INSERT INTO EMPLOYEE (EMPLOYEE_ID, ROLE_ID, SUPERVISOR_ID, FIRST_NAME, LAST_NAME, SALARY, ACCOUNT_PASSWORD)
VALUES (EMP_SEQ.nextval, 4, 1, 'Itto', 'Arataki', 30000,'ushi');

SELECT * FROM EMPLOYEE;

INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 105, 4);
INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 106, 4);
INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 107, 4);
INSERT INTO ROOM (ROOM_ID, ROOM_NUMBER, ROOM_TYPE_ID) VALUES (ROOM_SEQ.nextval, 107, 4);